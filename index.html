<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube Rank Tracker</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f172a" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="theme-dark">
  <div id="screenWarning" class="screen-warning">
  ğŸ“º For the best experience, view this dashboard on a larger screen.
</div>

  <div class="app">

    <!-- HEADER -->
    <header class="app-header">
      <div>
        <h1>ğŸ“Š YouTube Rank Tracker</h1>
        <p class="subtitle">Live channel overview + ranking by views with rank movement.</p>
      </div>

      <div class="header-controls">
        <button id="themeToggle" class="btn-ghost">ğŸŒ™ Dark</button>
        <button id="refreshBtn" class="btn-primary">ğŸ” Refresh Snapshot</button>
      </div>
    </header>

    <!-- CHANNEL SUMMARY -->
    <section class="channel-summary">
      <div class="channel-left">
        <img id="channelIcon" class="channel-icon" alt="Channel icon" />
        <div>
          <h2 id="channelName"></h2>
          <p id="channelHandle"></p>
          <p id="channelDescription" class="channel-description"></p>
        </div>
      </div>

      <div class="channel-metrics">
        <div class="metric">
          <span class="metric-label">Subscribers</span>
          <span class="metric-value" id="subsCount">0</span>
          <span class="metric-sub" id="subsGrowth">â€“</span>
        </div>
        <div class="metric">
          <span class="metric-label">Total views</span>
          <span class="metric-value" id="viewsCount">0</span>
          <span class="metric-sub" id="viewsGrowth">â€“</span>
        </div>
        <div class="metric">
          <span class="metric-label">Total likes</span>
          <span class="metric-value" id="likesCount">0</span>
          <span class="metric-sub" id="likesGrowth">â€“</span>
        </div>
        <div class="metric">
          <span class="metric-label">Avg views / video</span>
          <span class="metric-value" id="avgViewsCount">0</span>
          <span class="metric-sub" id="engagementScore">Engagement: â€“</span>
        </div>
      </div>
    </section>

    <!-- TOP VIDEO -->
    <section class="top-video" id="topVideoSection">
      <div class="top-video-thumb" id="topVideoThumb"></div>
      <div class="top-video-info">
        <h3 id="topVideoTitle">Top video</h3>
        <p id="topVideoStats"></p>
        <p id="topVideoMeta"></p>
      </div>
    </section>

    <!-- TABLE SECTION -->
    <!-- TABLE SECTION -->
<section class="table-section">

  <div class="table-header-row">
    <div class="filters">
      <button class="filter-btn active" data-type="all">ğŸ“º All</button>
      <button class="filter-btn" data-type="video">ğŸ¬ Videos</button>
      <button class="filter-btn" data-type="short">ğŸ“± Shorts</button>
    </div>

    <div class="legend">
      <span class="legend-item"><span class="dot dot-video"></span>Video</span>
      <span class="legend-item"><span class="dot dot-short"></span>Short</span>
      <span class="legend-item"><span class="dot dot-up"></span>Up</span>
      <span class="legend-item"><span class="dot dot-down"></span>Down</span>
      <span class="legend-item"><span class="dot dot-same"></span>Same</span>
    </div>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th class="sortable" data-sort="views">Views</th>
          <th class="sortable" data-sort="movement">Rank</th>
          <th class="sortable" data-sort="published">Published</th>
          <th class="sortable" data-sort="duration">Duration</th>
        </tr>
      </thead>

      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="footer-note-row">
    <p class="footer-note" id="countInfo"></p>
    <button id="resetBtn" class="reset-btn">Reset</button>
  </div>

</section>

  </div>

  <!-- BACK TO TOP -->
  <button id="backToTop" class="back-to-top">â¬† Top</button>

  <!-- MAIN SCRIPT -->
  <script type="module" src="app.js"></script>

  <!-- SERVICE WORKER -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/sw.js").catch(err => console.log("SW registration failed:", err));
    }
  </script>
  <script>
    function checkScreenSize() {
  const warning = document.getElementById("screenWarning");
  if (window.innerWidth < 700) {
    warning.style.display = "block";
  } else {
    warning.style.display = "none";
  }
}

window.addEventListener("resize", checkScreenSize);
window.addEventListener("load", checkScreenSize);

  </script>

</body>
</html>